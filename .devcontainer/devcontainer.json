{
  "name": "Shift Host Node",
  "image": "mcr.microsoft.com/devcontainers/universal:2",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {},
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20"
    }
  },
  "customizations": {
    "codespaces": {
      "openPorts": ["4000", "3001", "3002", "3003"]
    }
  },
  "portsAttributes": {
    "4000": {
      "label": "Shift Agent",
      "onAutoForward": "silent",
      "visibility": "public"
    },
    "3001-3010": {
      "label": "User Apps",
      "onAutoForward": "silent",
      "visibility": "public"
    }
  },
  "postCreateCommand": "test -n \\\"$GATEWAY_URL\\\" && curl -fsSL \\\"${GATEWAY_URL}/api/internal/download-agent\\\" -o agent.js",
  "postStartCommand": "nohup node agent.js >/tmp/agent.log 2>&1 &"
} 
